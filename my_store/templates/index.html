<!DOCTYPE html>
<html lang="en-us">

<head>
    {% load static %}
    {% load socialaccount %}
    <title>My Costs</title>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <link rel="shortcut icon" type="image/x-icon" href="../static/favicon.ico" />

    <link href="https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700italic,700,900,900italic" rel="stylesheet">

    <!-- STYLESHEETS -->
    <style type="text/css">
            [fuse-cloak],
            .fuse-cloak {
                display: none !important;
            }
        </style>

    <!-- Icons.css -->
    <link type="text/css" rel="stylesheet" href="../static/icons/fuse-icon-font/style.css">
    <!-- Animate.css -->
    <link type="text/css" rel="stylesheet" href="../static/node_modules/animate.css/animate.min.css">
    <!-- PNotify -->
    <link type="text/css" rel="stylesheet" href="../static/node_modules/pnotify/src/PNotifyBrightTheme.css">
    <!-- Nvd3 - D3 Charts -->
    <link type="text/css" rel="stylesheet" href="../static/node_modules/nvd3/build/nv.d3.min.css" />
    <!-- Perfect Scrollbar -->
    <link type="text/css" rel="stylesheet" href="../static/node_modules/perfect-scrollbar/css/perfect-scrollbar.css" />
    <!-- Fuse Html -->
    <link type="text/css" rel="stylesheet" href="../static/fuse-html/fuse-html.min.css" />
    <!-- Main CSS -->
    <link type="text/css" rel="stylesheet" href="../static/css/main.css">
    <!-- / STYLESHEETS -->

    <!-- JAVASCRIPT -->
    <!-- jQuery -->
    <script type="text/javascript" src="../static/node_modules/jquery/dist/jquery.min.js"></script>
    <!-- Mobile Detect -->
    <script type="text/javascript" src="../static/node_modules/mobile-detect/mobile-detect.min.js"></script>
    <!-- Perfect Scrollbar -->
    <script type="text/javascript" src="../static/node_modules/perfect-scrollbar/dist/perfect-scrollbar.min.js"></script>
    <!-- Popper.js -->
    <script type="text/javascript" src="../static/node_modules/popper.js/dist/umd/popper.min.js"></script>
    <!-- Bootstrap -->
    <script type="text/javascript" src="../static/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- Nvd3 - D3 Charts -->
    <script type="text/javascript" src="../static/node_modules/d3/d3.min.js"></script>
    <script type="text/javascript" src="../static/node_modules/nvd3/build/nv.d3.min.js"></script>
    <!-- Data tables -->
    <script type="text/javascript" src="../static/node_modules/datatables.net/js/jquery.dataTables.js"></script>
    <script type="text/javascript" src="../static/node_modules/datatables-responsive/js/dataTables.responsive.js"></script>
    <!-- PNotify -->
    <script type="text/javascript" src="../static/node_modules/pnotify/dist/iife/PNotify.js"></script>
    <script type="text/javascript" src="../static/node_modules/pnotify/dist/iife/PNotifyStyleMaterial.js"></script>
    <script type="text/javascript" src="../static/node_modules/pnotify/dist/iife/PNotifyButtons.js"></script>
    <script type="text/javascript" src="../static/node_modules/pnotify/dist/iife/PNotifyCallbacks.js"></script>
    <script type="text/javascript" src="../static/node_modules/pnotify/dist/iife/PNotifyMobile.js"></script>
    <script type="text/javascript" src="../static/node_modules/pnotify/dist/iife/PNotifyHistory.js"></script>
    <script type="text/javascript" src="../static/node_modules/pnotify/dist/iife/PNotifyDesktop.js"></script>
    <script type="text/javascript" src="../static/node_modules/pnotify/dist/iife/PNotifyConfirm.js"></script>
    <script type="text/javascript" src="../static/node_modules/pnotify/dist/iife/PNotifyReference.js"></script>
    <!-- Fuse Html -->
    <script type="text/javascript" src="../static/fuse-html/fuse-html.min.js"></script>
    <!-- Main JS -->
    <script type="text/javascript" src="../static/js/main.js"></script>
    <script type="text/javascript" src="../static/js/app.js"></script>

    <!-- / JAVASCRIPT -->

    <!--Manifest-->
    <link rel="manifest" href="/manifest.json">

</head>
<body class="layout layout-vertical layout-left-navigation layout-below-toolbar layout-below-footer">
    <main>
        <div id="wrapper">
            <div class="content-wrapper">
                <div class="content perfect-scrollbar">

                        <div id="login" class="p-8">
    
                            <div class="form-wrapper md-elevation-8 p-8">
    
                                <div class="logo bg-secondary" >
                                    <img src="../static/images/logos/logo_mycost.PNG" width="150px" height="150px"/>
                                </div>
    
                                <div class="title mt-4 mb-8">Bienvenido a My Costs!</div>
    
                                <form id="login_form" >
                                    {% csrf_token %}
                                    <div class="form-group mb-4">
                                        <input type="email" name="email" class="form-control" id="loginFormInputEmail" aria-describedby="emailHelp" placeholder="correo@example.cl" />
                                        <label for="loginFormInputEmail">Email</label>
                                    </div>
    
                                    <div class="form-group mb-4">
                                        <input type="password" name="contrasenia" class="form-control" id="loginFormInputPassword" placeholder="Contraseña" />
                                        <label for="loginFormInputPassword">Contraseña</label>
                                    </div>                                        
    
                                    <button id="loguearse" type="button" class="submit-button btn btn-block btn-secondary my-4 mx-auto" aria-label="LOG IN">
                                        Ingresar
                                    </button>
    
                                </form>
    
                                <div class="separator">
                                    <span class="text">O También</span>
                                </div>                                
    
                                <a class="facebook btn btn-block btn-secondary my-2 mx-auto" aria-label="LOG IN" href="{% url 'social:begin' 'facebook' %}" >
                                    <span>
                                        <i class="icon-facebook s-4"></i>
                                        <span>Entrar con Facebook</span>
                                    </span>
                                </a>
    
                                <div class="register d-flex flex-column flex-sm-row align-items-center justify-content-center mt-8 mb-6 mx-auto">
                                    <span class="text mr-sm-2">¿No tienes cuenta?</span>
                                    <a class="link text-secondary" href="/registrar">Registrese</a>
                                </div>
    
                            </div>
                        </div>
    
                    </div>                
                </div>
            </div>
        </div>
    </main>
</body>

    <!-- jQuery -->
    <script type="text/javascript" src="../static/node_modules/jquery/dist/jquery.min.js"></script>
    <!-- Mobile Detect -->
    <script type="text/javascript" src="../static/node_modules/mobile-detect/mobile-detect.min.js"></script>
    <!-- Perfect Scrollbar -->
    <script type="text/javascript" src="../static/node_modules/perfect-scrollbar/dist/perfect-scrollbar.min.js"></script>
    <!-- Popper.js -->
    <script type="text/javascript" src="../static/node_modules/popper.js/dist/umd/popper.min.js"></script>
    <!-- Bootstrap -->
    <script type="text/javascript" src="../static/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- Fuse Html -->
    <script type="text/javascript" src="../static/fuse-html/fuse-html.min.js"></script>
    <script type="text/javascript" src="../static/js/app.js"></script>
    <script type="text/javascript">
        $( document ).ready(function() {
  
            $("#loguearse").on("click",function () {
                str = $('#login_form').serialize();
                $.ajax({
                    type: "POST",
                    url: "/login",
                    data: str,
                    success: function(data) {
                        if(data.type=="success"){
                            PNotify.success({
                                title: data.tittle,
                                text: data.mensaje
                            });

                            setTimeout(function(){
                                window.location.href = "/home";
                            }, 1000);
                        }
                        if(data.type=="warning"){
                            PNotify.info({
                                title: data.tittle,
                                text: data.mensaje
                            });
                        }
                        if(data.type=="error"){
                            PNotify.error({
                                title: data.tittle,
                                text: data.mensaje
                            });
                        }
                        
                    },
                    error: function(data) {
                        PNotify.error({
                            title: 'Inicio Sesión',
                            text: 'Error al iniciar'
                        });
                    }
                });
            });


            
        });
  </script>
</html>